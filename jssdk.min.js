/**version:1.0.8;author:plat-h5**/
!function(t,n,r){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?r(t,n):function(t){return r(t,n)}:"function"==typeof define&&(define.cmd||define.amd)?define(function(){return r(t,n)}):r(t,n)}(void 0!==this?this:window,window,function(t,n){var r=function(){var t={verify_url:"",id:"252",key:"page.jd.com_1529043611",domain:"page.jd.com",authorized:0,blacklist:[]},n={alert:!1,debug:!1,setAuthorized:function(n){t.authorized=n?parseInt(n)%2:t.authorized},setBlackList:function(n){"[object Array]"==Object.prototype.toString.call(n)&&(t.blacklist=n||t.blacklist)},getVerify_url:function(){return t.verify_url||""},getId:function(){return t.id||0},getKey:function(){return t.key||""},getDomain:function(){return t.domain||""},getAuthorized:function(){return t.authorized},getBlackList:function(){return t.blacklist||[]},getOptions:function(){return t||{}},setOptions:function(n){t=n},printMsg:function(t,r){n.debug&&console.log("***"+t+"*** "+r),n.alert&&alert("***"+t+"*** "+r)}};return n}();return t=t||this,t.JSSDK=r,function(t){"use strict";t.Common={client:function(){var t={},r=navigator&&navigator.userAgent||"";if(/jdapp/.test(r)){t.jdapp=!0;var e=r.split(";");t.appVersion=e[2],t.OSVersion=e[3],t.udid=e[4],t.network=e[5].replace("network/","")}if(t.jailbreak=r.indexOf("channelID/pp601")>-1,t.WKwebview=r.indexOf("supportJDSHWK/1")>-1||1==n._is_jdsh_wkwebview,t.ios=!!r.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),t.android=r.indexOf("Android")>-1||r.indexOf("android")>-1,t.iPhone=r.indexOf("iPhone")>-1||r.indexOf("iphone")>-1,t.iPad=r.indexOf("iPad")>-1||r.indexOf("ipad")>-1,t.weixin=r.indexOf("MicroMessenger")>-1||r.indexOf("micromessenger")>-1,t.qq="QQ"==(r.match(/\sQQ/i)||"").toString().toLocaleUpperCase().trim(),t.trident=r.indexOf("Trident")>-1,t.presto=r.indexOf("Presto")>-1,t.webKit=r.indexOf("AppleWebKit")>-1,t.gecko=r.indexOf("Gecko")>-1&&-1==r.indexOf("KHTML"),t.chrome=null!==r.match(/Chrome/i)&&null===r.match(/Version\/\d+\.\d+(\.\d+)?\sChrome\//i),t.safari=(t.iPhone||t.iPad)&&r.match(/Safari/),t.safariVersion=0,t.safari){var o=r.match(/Version\/([\d\.]+)/);t.safariVersion=o;try{t.safariVersion=parseFloat(o[1],10)}catch(t){}}return t.ios10Chrome=!!r.match(/(Mac\sOS)\sX\s([\d_]+)/),t.isSAMSUNGN7508V=-1!=r.toUpperCase().indexOf("SAMSUNG-SM-N7508V"),t}(),printMsg:function(n,r){t.printMsg(n,r)},mergeJson:function(t,n){var r={};for(var e in t)r[e]=t[e];for(e in n)r[e]=n[e];return r},mergeArray:function(t,n){if("[object Array]"==Object.prototype.toString.call(t)&&"[object Array]"==Object.prototype.toString.call(n)){for(var r in n)t.indexOf(n[r])<0&&t.push(n[r]);return t}},extend:function(t,n){n=n||{};for(var r in n)t.hasOwnProperty(r)&&(t[r]=n[r]);return t},stringify:function(t){return t=t||"",JSON.stringify(t)},formatParams:function(t){var n=[];for(var r in t)n.push(encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return n.join("&")},isNull:function(t){var n=!1;return void 0===t?n=!0:"object"!=typeof t||t instanceof Array?0===t.replace(/(^s*)|(s*$)/g,"").length&&(n=!0):n=this.isObjEmpty(t),n},isObjEmpty:function(t){var n=!0;if("object"==typeof t&&!(t instanceof Array))for(var r in t){n=!1;break}return n},isObj:function(t){return"object"==typeof t&&!!t},isJSONString:function(t){try{return!!(this.isString(t)&&t.indexOf("{")>-1)&&(JSON.parse(t),!0)}catch(t){return!1}},isString:function(t){return"[object String]"==Object.prototype.toString.call(t)},getCookie:function(t){var n,r=new RegExp("(^| )"+t+"=([^;]*)(;|$)");return(n=document.cookie.match(r))?n[2]:null},hasIntersectByKey:function(t,n){t=t||{},n=n||{};var r={isExist:!1,paramExist:[]};for(var e in t)if(n.hasOwnProperty(e)){r.isExist=!0,r.paramExist.push(e);break}return r},isSubSetByKeys:function(t,n){t=t||{},n=n||{};var r={isSub:!0,lackParam:[]};for(var e in t)n.hasOwnProperty(e)||(r.isSub=!1,r.lackParam.push(e));return r},firstUpperCase:function(t){return t.toLowerCase().replace(/\b[a-z]/g,function(t){return t.toUpperCase()})},compareVersion:function(t){var n=-1;if(this.client.jdapp){var r=this.client.appVersion.split("."),e=t.split(".");if(r.length>=3&&e.length>=3){(parseInt(r[0])>=10||parseInt(e[0])>=10)&&(r[0]="0"+r[0],e[0]="0"+e[0],r[0]=r[0].substr(-1,2),e[0]=e[0].substr(-1,2)),(parseInt(r[1])>=10||parseInt(e[1])>=10)&&(r[1]="0"+r[1],e[1]="0"+e[1],r[1]=r[1].substr(-1,2),e[1]=e[1].substr(-1,2)),(parseInt(r[2])>=10||parseInt(e[2])>=10)&&(r[2]="0"+r[2],e[2]="0"+e[2],r[2]=r[2].substr(-1,2),e[2]=e[2].substr(-1,2));n=parseInt(r[0].toString()+r[1].toString()+r[2].toString())-parseInt(e[0].toString()+e[1].toString()+e[2].toString())}}return n},hexCharToStr:function(t){var n=t.trim(),r="0x"===n.substr(0,2).toLowerCase()?n.substr(2):n,e=r.length;if(e%2!=0)return t;for(var o,a=[],i=0;i<e;i+=2)o=parseInt(r.substr(i,2),16),a.push(String.fromCharCode(o));return a.join("")},deCompileForStr:function(t){var n=t.split("");return n=n.reverse(),this.hexCharToStr(n.join(""))},deCompileForJson:function(t){t=t||{};for(var n in t)t[n]=this.deCompileForStr(t[n])},contain_in_arr:function(t,n){for(var r in t)if(t[r].toLowerCase()==n.toLowerCase())return!0;return!1}},t.Common}(r),function(t){"use strict";var n=0,r=[],e=[],o={id:"0",key:"0",domain:"",url:"//badjs.m.jd.com/report",combo:1,level:2,delay:1e3},a=function(n){var r={};return(r=t.Common.isObj(n)?n:{msg:n}).from||(r.from=location.href),r},i=function(n,r){var e=[],a=[],i=[];if(t.Common.isObj(n)){n.key=n.key||o.key,n.domain=n.domain||o.domain,n.level=n.level||o.level;for(var s in n){var c=n[s];if(c=c.toString(),!t.Common.isNull(c)){if(t.Common.isObj(c))try{c=t.Common.stringify(c)}catch(t){c="[JSSDK_REPORT detect value stringify error] "+t.toString()}i.push(s+":"+c),e.push(s+"="+encodeURIComponent(c)),a.push(s+"["+r+"]="+encodeURIComponent(c))}}}return[a.join("&"),i.join(","),e.join("&")]},s=function(){for(function(){var t=parseInt(o.id,10);if(!t)return!1;/jd\.com$/gi.test(location.hostname)&&(o.url||(o.url="//badjs.m.jd.com/report")),o.report=(o.url||"/report")+"?id="+t+"&"}();r.length;){var t=r.shift(),a=i(t,e.length);e.push(a[0])}if(e.length){n||(n=setTimeout(function(){clearTimeout(n),function(t){(new Image).src=t}(o.report+e.join("&")+"&count="+e.length+"&_t="+new Date),n=0,e=[]},o.delay))}},c={push:function(t){var n=a(t);return r.push(n),s(),c},report:function(t){var n=a(t);return r.push(n),s(),c}};t.options&&(o.id=t.getId(),o.key=t.getKey(),o.domain=t.getDomain()),t.Report=c}(r),function(t){"use strict";r.Common.Validator={patterns:{email:function(t,n){return/^(?:[a-z0-9]+[_\-+.]?)*[a-z0-9]+@(?:([a-z0-9]+-?)*[a-z0-9]+.)+([a-z]{2,})+$/i.test(t)},mobile:function(t,n){return/^1[3-9]\d{9}$/.test(t)},tel:function(t,n){return/^(?:(?:0\d{2,3}[- ]?[1-9]\d{6,7})|(?:[48]00[- ]?[1-9]\d{6}))$/.test(t)},url:function(t,n){return/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(t)},digit:function(t,n){return/^\d+$/.test(t)},minLength:function(t,n){return t.length>=n},maxLength:function(t,n){return t.length<=n},min:function(t,n){return t>=n},max:function(t,n){return t<=n},range:function(t,n){return t>=n[0]&&t<=n[1]},date:function(t,n){return!/Invalid|NaN/.test(new Date(t).toString())},dateISO:function(t,n){return/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(t)},number:function(t,n){return/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(t)},require:function(t,n){return/\S+/.test(t)}},isValid:function(t,n){t=t||{};var r={isMatch:!0,paramType:""};for(var e in t){if(!r.isMatch)break;this.patterns.hasOwnProperty(e)&&(r.isMatch=this.patterns[e](n,t[e]),r.paramType=e)}return r}}}(),function(t){"use strict";t.Native={},t.Native}(r),function(t){"use strict";t.Module={checkInputParams:function(n,r){var e=n.requiredParams,o=n.typeParams,a=n.ruleParams||{},i=!0;return t.Common.isNull(e)||(t.Common.isNull(r)?i=!1:this.isMatchedRequiredParams(e,r)||(i=!1)),t.Common.isNull(o)||t.Common.isNull(r)||this.isDiffStaticParams(o,r)||(i=!1),t.Common.isNull(a)||t.Common.isNull(r)||this.isMatchedByRuleParams(a,r)||(i=!1),i},isMatchedByRuleParams:function(n,r){n=n||{},r=r||{};var e=!0,o={};for(var a in n)if(r.hasOwnProperty(a)&&!(o=t.Common.Validator.isValid(n[a],r[a])).isMatch){t.Common.printMsg("invalid parameters","params:"+t.Common.stringify(r)+"\nthe type of param "+a+" must be "+o.paramType),e=!1;break}return e},isMatchedRequiredParams:function(n,r){var e=t.Common.isSubSetByKeys(n,r);return e.isSub||t.Common.printMsg("invalid parameters","params:"+t.Common.stringify(r)+"\nlack param "+e.lackParam),e.isSub},isDiffStaticParams:function(n,r){var e=t.Common.hasIntersectByKey(n,r);return e.isExist&&t.Common.printMsg("invalid parameters","params:"+t.Common.stringify(r)+"\nthe param "+e.paramExist+" can't be change"),!e.isExist},getConfigString:function(n,r){return t.Common.stringify(this.getWholeCurrentParams(n,r))},getStandardConfigStr:function(n,r){return t.Common.formatParams(this.getWholeCurrentParams(n,r))},getWholeCurrentParams:function(n,r){return r=this.filterInputParams(n,r),t.Common.extend(this.getWholeDefaultParams(n),r)},getWholeDefaultParams:function(n){var r=t.Common.mergeJson(n.typeParams,n.edgeParams);return t.Common.mergeJson(r,n.requiredParams)},getOpenAppVirtualHeader:function(){return t.Schema?t.Schema.getOpenAppVirtualHeader():""},getOpenAppComHeader:function(){return t.Schema?t.Schema.getOpenAppComHeader():""},getRouterHeader:function(n){return t.Schema?t.Schema.getRouterHeader(n):""},getOpenAppVirtualUrl:function(t,n){return this.getOpenAppVirtualHeader()+this.getConfigString(t,n)},getOpenAppComUrl:function(t,n){return this.getOpenAppComHeader()+this.getConfigString(t,n)},getRouterUrl:function(t,n,r){return this.getRouterHeader(t)+this.getStandardConfigStr(n,r)},getDefaultOpenAppUrl:function(t,n){return this.getOpenAppVirtualUrl(t,n)},toAppUrl:function(r){t.CallApp?t.CallApp.callApp(r):n.location.href=r},isIOS:function(){return t.Common.client.ios||t.Common.client.iPhone||t.Common.client.iPad},isAndroid:function(){return t.Common.client.android},isJDApp:function(){return t.Common.client.jdapp||!1},isWKwebview:function(){return!(!t.Common.client.WKwebview&&1!=n._is_jdsh_wkwebview)},filterInputParams:function(t,n){return n=this.parseInputParams(t,n)},parseInputParams:function(t,n){if(t){var r=t.ruleParams;if(r)for(var e in r)r[e].hasOwnProperty("url")&&r[e].url&&this.isIOS()&&(n[e]=encodeURIComponent(n[e])),r[e].hasOwnProperty("digit")&&r[e].digit&&(n[e]=n[e].toString())}return n},callServiceFun:function(n,r,e){if(this.report("callServiceFun"),this.checkInputParams(n,r)){var o=this.getWholeCurrentParams(n,r);if((o=o||{}).hasOwnProperty("requestUrl")){var a=o.requestUrl;delete o.requestUrl,t.Service.corsRequest(a,o,e)}else t.Service.failedResponse(e,"lack of parameter 'requestUrl'")}else t.Service.failedResponse(e,"invalid params")},report:function(n){t.Report&&setTimeout(function(){t.Common.printMsg("module","funName=report"),t.Report.push(n)},0)},doFunForPlatForm:function(t,n,r,e,o){var a=n,i=null;if(t&&t.versionParams&&t.versionParams[n]&&(i=t.versionParams[n]),i&&(a=this.getApiNameByVersion(n,i)),a===n){this.report(a);var s=null;t&&t.optionParams&&t.optionParams[n]&&(s=t.optionParams[n]),s&&!this.checkInputParams(s,r)?this.errorCallback("param not valid",e):o()}else t&&t[a]?t[a](r,e):this.errorCallback("fun not found,funName:"+a,e)},doBridgeFun:function(n,r){var e=r.apiName=r.apiName||"";if(this.hasAca(e)){if(!r.apiName)return t.Common.printMsg("apiName not found"),!1;r.inputParams=r.inputParams||{},r.inputCallback=r.inputCallback||function(t){console.log(t)};var o="android";this.isIOS()&&(o="ios");var a=null;if(n&&n.optionParams&&n.optionParams[r.apiName]&&(a=n.optionParams[r.apiName]),a&&!this.checkInputParams(a,r.inputParams))return this.errorCallback("param not valid",r.inputCallback),!1;if(n&&n.versionParams&&n.versionParams[r.apiName]){var i=null;(i=n.versionParams[r.apiName][o]?n.versionParams[r.apiName][o]:n.versionParams[r.apiName])&&(e=this.getApiNameByVersion(r.apiName,i))}e===r.apiName?(this.report(e),r.logic?r.logic():this.errorCallback("params.logic not found",r.inputCallback)):n&&n[e]?n[e](r.inputParams,r.inputCallback):this.errorCallback("fun not found,funName:"+e,r.inputCallback)}else t.printMsg(e,"has no access control authority")},getApiNameByVersion:function(n,r){if(r&&t.Common.client.jdapp)for(var e in r){var o=e.begin||"",a=e.end||"",i=1,s=-1;""!==o&&(i=common.compareVersion(o)),""!==a&&(s=common.compareVersion(a)),i>=0&&s<0&&(n=e)}return n},callIOSStandardBridge:function(n,r){if(t.Native.IOS){var e=this;t.Native.IOS.callBridgeFun(n,function(t){e.standardCallback(t,r)})}else this.standardCallback({state:"0",data:"",msg:"JSSDK.IOS module not found!"},r)},standardCallback:function(n,r){if(t.Common.isObj(n))this._standardCallbackByJson(n,r);else if(t.Common.isString(n)&&""!==n)if(t.Common.isJSONString(n)){var e=JSON.parse(n);this._standardCallbackByJson(e,r)}else r({state:"1",data:n,msg:""});else r({state:"0",data:"",msg:"data type not support"})},_standardCallbackByJson:function(n,r){r(n.result&&t.Common.isObj(n.result)?{state:n.result.state||"0",data:n.result.data||"",msg:n.result.msg||""}:{state:n.state||"0",data:n.data||n,msg:n.msg||""})},errorCallback:function(n,r){t.Common.isObj(n)?(n.state="0",this._standardCallbackByJson(n,r)):this._standardCallbackByJson({state:"0",data:"",msg:n},r)},successCallback:function(n,r){if(t.Common.isObj(n))n.result?n.result.state="1":n.state="1",this._standardCallbackByJson(n,r);else if(t.Common.isString(n)&&""!==n)if(t.Common.isJSONString(n)){var e=JSON.parse(n);e.result?e.result.state="1":e.state="1",this._standardCallbackByJson(e,r)}else r({state:"1",data:n,msg:""});else this._standardCallbackByJson({state:"1",data:n,msg:""},r)},hasAca:function(n){var r=!0,e=t.getBlackList();return 0==t.getAuthorized()?t.Common.contain_in_arr(e,n)&&(r=!1):r=!1,r}}}(r),function(t,r){"use strict";t.Sys={versionParams:{openCamera:{ios:{openCameraForIos:{}},android:{openCameraForAnd:{}}},openContacts:{ios:{openContactsForIos:{}},android:{openContactsForAnd:{}}},showChooseImage:{ios:{showChooseImageForIos:{}},android:{showChooseImageForAnd:{}}},showBarcodeScan:{ios:{showBarcodeScanForIos:{}},android:{showBarcodeScanForAnd:{}}},startRecord:{ios:{startRecordForIos:{}},android:{startRecordForAnd:{}}}},openCamera:function(){r.Module.doBridgeFun(this,{apiName:"openCamera"})},openCameraForIos:function(t,e){r.Common.printMsg("ios openCamera","start openCamera"),n.location.href="objc:callCamera"},openCameraForAnd:function(t,e){n.JDClient&&JDClient.openCamera&&(r.Common.printMsg("openCamera","start openCamera"),JDClient.openCamera())},openContacts:function(){r.Module.doBridgeFun(this,{apiName:"openContacts"})},openContactsForIos:function(t,e){r.Common.printMsg("ios callContacts","start callContacts"),n.location.href="objc:callContacts"},openContactsForAnd:function(t,e){r.Common.printMsg("android","callContacts"),n.JdAndroid&&JdAndroid.callContacts&&JdAndroid.callContacts()},showChooseImage:function(){r.Module.doBridgeFun(this,{apiName:"showChooseImage"})},showChooseImageForIos:function(t,e){n.location.href="objc:callCamera",r.Common.printMsg("ios","showChooseImage")},showChooseImageForAnd:function(t,e){r.Common.printMsg("android","showChooseImage"),n.androidUploadImg&&androidUploadImg.imageUpload&&androidUploadImg.imageUpload()},showBarcodeScan:function(t){r.Module.doBridgeFun(this,{apiName:"showBarcodeScan",inputCallback:t})},showBarcodeScanForIos:function(t,e){r.Common.client.WKwebview?(r.Common.printMsg("ios","WKwebview support"),n.showBarcodeScanCallback=function(t){r.Module.successCallback(t,e)},n.webkit.messageHandlers.MobileNavi.postMessage({method:"showNativeBarcodeScan",params:"showBarcodeScanCallback",callBackName:null,callBackId:null})):(r.Common.printMsg("ios","objc support"),n.scanCallBack=function(t){r.Module.successCallback(str,e)},n.location.href="objc:barScanStart")},showBarcodeScanForAnd:function(t,e){r.Common.printMsg("android","showBarcodeScan"),n.MobileNavi&&MobileNavi.showNativeBarcodeScan?(r.Common.printMsg("android","showBarcodeScan environment support"),n.showBarcodeScanCallback=function(t){r.Module.successCallback(t,e)},MobileNavi.showNativeBarcodeScan("showBarcodeScanCallback")):(r.Common.printMsg("android","showBarcodeScan environment not support"),r.Module.errorCallback("environment not support",e))},startRecord:function(){r.Module.doBridgeFun(this,{apiName:"startRecord"})},startRecordForIos:function(t,e){r.Common.printMsg("ios","startRecord"),n.location.href="objc:startAudioRecorder"},startRecordForAnd:function(t,e){r.Common.printMsg("android","startRecord"),n.JdAndroid&&JdAndroid.startRecoder&&JdAndroid.startRecoder()}}}(r.Native,r),r});